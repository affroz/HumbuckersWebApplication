<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:humbuckers="http://com.is.faces/ui">

    <style>
   .mycomponenthide {
	display: none !Important;
}

.ui-state-highlight .mycomponenthide {
	display: block !Important;
}
    </style>
	<div class="card">
		<div class="header">
			<h3 class="title">Project Activities</h3>
		</div>
		<div class="content">
			<h:panelGroup id="treePnl">
				<div class="row">
					<div class="col-md-8">
						<p:commandLink update="treePnl" 
							oncomplete="PF('wbsDialog').show()" value="Add">
							<f:setPropertyActionListener value="#{projectBean.projectWbsBean.root}"
								target="#{projectBean.projectWbsBean.selectedNode}" />
						</p:commandLink>
						<p:treeTable value="#{projectBean.projectWbsBean.root}" var="document"
							selectionMode="single" selection="#{projectBean.projectWbsBean.selectedNode}">

							<p:column headerText="Name">
								<h:outputText value="#{document.activityName}" />
							</p:column>

							<p:column>
								<p:commandLink rendered="#{document.activityCode ne 1}"
									oncomplete="PF('wbsDialog').show()" value="Add WBS"
									styleClass="mycomponenthide">
								</p:commandLink>
								<p:commandLink rendered="#{document.activityCode ne 1}"
									oncomplete="PF('activityDialog').show()" value="Add Activity"
									styleClass="mycomponenthide">
								</p:commandLink>
								
								<p:commandLink update="treePnl" styleClass="mycomponenthide"
									 value="Remove" action="#{projectBean.projectWbsBean.deleteNode}">
								</p:commandLink>
								
								
								<h:panelGroup  rendered="#{document.activityCode eq 1}" >
	                             <div class="row" >
									
									<div class="col-md-6">
										<p:calendar value="#{document.activityPlannedStartDate}" placeholder="Planned Start Date"
											class="form-control mycalendar" pattern="dd-MMM-yyyy" />
									</div>
									<div class="col-md-6">
										<p:calendar value="#{document.activityPlannedEndDate}" placeholder="Planned End Date"
											class="form-control mycalendar" pattern="dd-MMM-yyyy" />
									</div>
									</div>
									 <div class="row" >
									<div class="col-md-6">
										<p:calendar value="#{document.activityAcutalStartDate}" placeholder="Actual Start Date"
											class="form-control mycalendar" pattern="dd-MMM-yyyy" />
									</div>
									<div class="col-md-6"> 
										<p:calendar value="#{document.activityActualEndDate}" placeholder="Actual End Date"
											class="form-control mycalendar" pattern="dd-MMM-yyyy" />
									</div>
									
								</div>
                             
                             </h:panelGroup>
							</p:column>
						</p:treeTable>
					</div>
				</div>
			</h:panelGroup>
			

			<p:dialog id="dialog" header="Add Activity"
				widgetVar="activityDialog" resizable="false">
				<p:outputPanel>
					<h:outputLabel value="Name: " />
					<p:inputText
						value="#{projectBean.projectWbsBean.projectWbsDTO.activityName}"
						style="font-weight:bold" />

					<p:commandLink update="treePnl"
						oncomplete="PF('activityDialog').hide()" value="Add"
						action="#{projectBean.projectWbsBean.addActivityNode}">
					</p:commandLink>
				</p:outputPanel>
			</p:dialog>
			
						<p:dialog id="dialog1" header="Add WBS"
				widgetVar="wbsDialog" resizable="false">
				<p:outputPanel id="documentPanel">
					<h:outputLabel value="Name: " />
					<p:inputText
						value="#{projectBean.projectWbsBean.projectWbsDTO.wbsname}"
						style="font-weight:bold" />

					<p:commandLink update="treePnl" 
						oncomplete="PF('wbsDialog').hide()" value="Add"
						action="#{projectBean.projectWbsBean.addWbsNode}">
					</p:commandLink>
				</p:outputPanel>
			</p:dialog>





		</div>
		<p:commandButton value="Save Project"
			action="#{projectBean.saveProject}" ajax="false"
			class="btn btn-info btn-fill pull-right" update="@form" />
		<p:commandButton value="Back" action="#{projectBean.onClickofBack}"
			ajax="false" class="btn btn-info btn-fill" update="@form" />
		<div class="clearfix"></div>
	</div>
</ui:composition>
